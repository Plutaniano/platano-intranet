{% extends 'layouts/main.html' %}
{% block title %}Consulta{% endblock %}
{% block content %}
<form accept-charset="UTF-8" action="{{ url_for('views.consulta') }}" method="POST">
    <div class="form-group mt-3">
        {{ form.ano_mes(class_='form-control first-input', required=true) }}
        {{ form.assessores(class_='form-control', required=true) }}
        {{ form.tabela(class_='form-control', required=true) }}
        <input type="submit" name="action" value="Consultar" class="btn btn-primary btn-lg">
        <input type="submit" name="action" value="Exportar" class="btn btn-primary btn-lg">
    </div>
</form>

{% if tabela %}
<table class="table table-hover table-striped table-sm">
  <thead>
    <tr>
      {% for i in tabela.showable_columns %}
      <th scope="col">{{ i[0].name + ' ' + i[2] }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for row in data %}
    <tr>
      {% for item in row %}
        <td>{{ tabela.showable_columns[loop.index-1][1](item) }}</td>
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}