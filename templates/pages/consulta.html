{% extends 'layouts/main.html' %}
{% block title %}Consulta{% endblock %}
{% block content %}
<form accept-charset="UTF-8" action="{{ url_for('consulta') }}" method="POST">
    <div class="form-group mt-3">
        {{ form.ano_mes(class_='form-control first-input', required=true) }}
        {{ form.assessores(class_='form-control', required=true) }}
        {{ form.tabela(class_='form-control', required=true) }}
        <input type="submit" value="Consultar" class="btn btn-primary btn-lg">
    </div>
</form>

{% if tabela == 'investimentos' %}
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Classificação</th>
      <th scope="col">Produto</th>
      <th scope="col">Nível 1</th>
      <th scope="col">Nível 2</th>
      <th scope="col">Cliente</th>
      <th scope="col">Data</th>
      <th scope="col">Receita Bruta (R$)</th>
      <th scope="col">Receita Líquida (R$)</th>
      <th scope="col">Comissão Escritório (%)</th>
      <th scope="col">Comissão Escritório (R$)</th>
    </tr>
  </thead>
  <tbody>
  {% for i in data %}
    <tr>
      <td>{{ i.classificacao }}</td>
      <td>{{ i.produto }}</td>
      <td>{{ i.nivel1 }}</td>
      <td>{{ i.nivel2 }}</td>
      <td>{{ i.cliente }}</td>
      <td>{{ i.data.strftime('%Y/%m') }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.receita_bruta) }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.receita_liquida) }}</td>
      <td>{{ "{:,.2f}".format( 100 * i.comissao_escritorio_porcento) }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.comissao_escritorio) }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}


{% if tabela == 'previdencia' %}
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Código A</th>
      <th scope="col">Ano/mês</th>
      <th scope="col">Receita Liquida Total (R$)</th>
      <th scope="col">Receita Bruta Total (R$)</th>
    </tr>
  </thead>
  <tbody>
  {% for i in data %}
    <tr>
      <th scope="row">A{{ i.codigo_assessor }}</th>
      <td>{{ i.ano_mes.strftime('%Y/%m') }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.receita_liquida_total) }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.receita_bruta_total) }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}


{% if tabela == 'co_corretagem' %}<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Código A</th>
      <th scope="col">Ano/mês</th>
      <th scope="col">Cliente</th>
      <th scope="col">Receita Total (R$)</th>
    </tr>
  </thead>
  <tbody>
  {% for i in data %}
    <tr>
      <th scope="row">A{{ i.codigo_assessor }}</th>
      <td>{{ i.ano_mes.strftime('%Y/%m') }}</td>
      <td>{{ i.cliente }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.receita_total) }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}

{% if tabela == 'bancoXP' %}
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Código A</th>
      <th scope="col">Ano/mês</th>
      <th scope="col">Cliente</th>
      <th scope="col">Total Receita (R$)</th>
    </tr>
  </thead>
  <tbody>
  {% for i in data %}
    <tr>
      <th scope="row">A{{ i.codigo_assessor }}</th>
      <td>{{ i.ano_mes.strftime('%Y/%m') }}</td>
      <td>{{ i.codigo_cliente }}</td>
      <td>{{ "{:,.2f}".format( 0.01 * i.total_receita) }}</td>
    </tr>
  {% endfor %}
  </tbody>
  </table>
{% endif %}



{% if tabela == 'incentivo_previdencia' %}
<table class="table table-hover">
<thead>
  <tr>
    <th scope="col">Código A</th>
    <th scope="col">Ano/mês</th>
    <th scope="col">Cliente</th>
    <th scope="col">Adiantamento Previdência (R$)</th>
  </tr> 
</thead>
<tbody>
{% for i in data %}
  <tr>
    <th scope="row">A{{ i.codigo_assessor }}</th>
    <td>{{ i.ano_mes.strftime('%Y/%m') }}</td>
    <td>{{ i.codigo_cliente }}</td>
    <td>{{ "{:,.2f}".format( 0.01 * i.adiantamento_previdencia) }}</td>
  </tr>
{% endfor %}
</tbody>
</table>
{% endif %}

{% endblock %}